services:
  - type: web
    name: listings-service
    runtime: node
    plan: starter
    rootDir: services/listings
    buildCommand: npm install
    startCommand: npm run start
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: listings-db
          property: connectionString
      - key: PORT
        value: 4001

  - type: web
    name: messaging-service
    runtime: node
    plan: starter
    rootDir: services/messaging
    buildCommand: npm install
    startCommand: npm run start
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: messaging-db
          property: connectionString
      - key: PORT
        value: 4002

  - type: web
    name: offers-service
    runtime: node
    plan: starter
    rootDir: services/offers
    buildCommand: npm install
    startCommand: npm run start
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: offers-db
          property: connectionString
      - key: PORT
        value: 4003

  - type: web
    name: payments-service
    runtime: node
    plan: starter
    rootDir: services/payments
    buildCommand: npm install
    startCommand: npm run start
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: payments-db
          property: connectionString
      - key: PORT
        value: 4004

  - type: web
    name: disputes-service
    runtime: node
    plan: starter
    rootDir: services/disputes
    buildCommand: npm install
    startCommand: npm run start
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: disputes-db
          property: connectionString
      - key: PORT
        value: 4005

  - type: web
    name: notifications-service
    runtime: node
    plan: starter
    rootDir: services/notifications
    buildCommand: npm install
    startCommand: npm run start
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: notifications-db
          property: connectionString
      - key: PORT
        value: 4006

databases:
  - name: listings-db
    plan: starter
    databaseName: listings
    user: marketplace

  - name: messaging-db
    plan: starter
    databaseName: messaging
    user: marketplace

  - name: offers-db
    plan: starter
    databaseName: offers
    user: marketplace

  - name: payments-db
    plan: starter
    databaseName: payments
    user: marketplace

  - name: disputes-db
    plan: starter
    databaseName: disputes
    user: marketplace

  - name: notifications-db
    plan: starter
    databaseName: notifications
    user: marketplace
